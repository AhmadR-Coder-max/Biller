<% @page_title = "Order \u{1f60e}" %>

<h2 style="margin: 25px; text-align: center;"> Orders</h2>

<table class="table table-secondary table-striped container shadow-sm p-3 mb-5">
  <thead class="thead-dark">
  <tr>
    <th> ID </th>
    <th> Customer </th>
    <th> Total Bill </th>
    <th> Items </th>
    <th> Created </th>
    <th> Updated </th>
    <th colspan="3"> Actions </th>
  </tr>
  </thead>
  <tbody>
  <% @orders.each do |order| %>
    <tr>
      <td> <%= order.id %> </td>
      <td> <%= link_to(order.customer.name, {controller: :customers, action: :show, id: order.customer.id}) %> </td>
      <td> <%= order.total_bill %> </td>
      <td> <%= order.item_names.to_s.truncate(50) %> </td>
      <td> <%= time_ago_in_words(order.created_at) %> </td>
      <td> <%= time_ago_in_words(order.updated_at) %> </td>
      <td>
        <%= link_to('Show', {action: :show, id: order.id}, class: 'btn btn-outline-primary btn-sm') %>
        <%= link_to('Edit', {action: :edit, id: order.id}, class: 'btn btn-outline-primary btn-sm') %>
        <%= link_to('Destroy', {action: :destroy, id: order.id}, method: :destroy, data: { confirm: 'Are you sure?' }, class: 'btn btn-outline-primary btn-sm') %>
      </td>
    </tr>
  <% end %>
  </tbody>
</table>
<%= link_to("New Order", {action: :new}, class: "btn btn-secondary btn-lg btn-block mt-5 container") %>